"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[68072,40796],{88255:(e,a,t)=>{t.d(a,{A:()=>N});var r=t(65043),n=t(96446),i=t(85865),s=t(60587),l=t(68903),o=t(12110),c=t(26494),d=t(63336),p=t(35721),u=t(37918),h=t(2050),m=t(48734),x=t(39336),y=t(41180),v=t(75748),g=t(87734),j=t(52185),f=t(6026),b=t(80379),_=t(70095),A=t(28791),S=t(87890),k=t(91281),w=t(17869),C=t(82291),R=t(51619),z=t(16851),M=t(42796),F=t(48304),P=t(70579);const D=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],I=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),N=e=>{let{data:a=[],fieldsConfig:t,collectionName:N,modules:B=[]}=e;const O=(0,r.useMemo)((()=>{if(!a.length)return[];const e=Object.keys(t).filter((e=>"number"===t[e].type&&!e.includes("id")&&"unit_price"!==e));return t.unit_price&&e.push("unit_price"),e.map((e=>{const r=a.reduce(((a,t)=>a+(Number(t[e])||0)),0),n=r/a.length;return{key:e,label:t[e].label,sum:r,avg:n,min:Math.min(...a.map((a=>Number(a[e])||0))),max:Math.max(...a.map((a=>Number(a[e])||0)))}}))}),[a,t]),E=(0,r.useMemo)((()=>{if(!a.length)return[];return Object.keys(t).filter((e=>"select"===t[e].type)).map((e=>{const r=a.reduce(((a,t)=>{const r=t[e]||"Unknown";return a[r]=(a[r]||0)+1,a}),{});return{key:e,label:t[e].label,data:Object.keys(r).map((e=>({name:e,value:r[e]})))}}))}),[a,t]),$=(0,r.useMemo)((()=>{var e;if(!a.length)return[];const r=Object.keys(t).find((e=>"date"===t[e].type||"datetime"===t[e].type))||"created_at",n=a.reduce(((e,a)=>{let t=a[r];if(!t&&a.created_at&&(t=a.created_at),!t)return e;const n=new Date(t).toISOString().slice(0,7);return e[n]=(e[n]||0)+1,e}),{}),i=Object.keys(n).sort().map((e=>({date:e,count:n[e]})));return{label:`Trend over time (${(null===(e=t[r])||void 0===e?void 0:e.label)||"Date"})`,data:i}}),[a,t]),K=(0,r.useMemo)((()=>{if(!a.length)return["No data available to generate insights."];const e=[];return e.push(`Total ${a.length} records analyzed.`),O.forEach((a=>{e.push(`Total ${a.label}: ${a.key.includes("price")||a.key.includes("amount")?I(a.sum):a.sum.toLocaleString()}`)})),E.forEach((a=>{const t=a.data.sort(((e,a)=>a.value-e.value))[0];t&&e.push(`Most common ${a.label}: ${t.name} (${t.value} occurrences)`)})),e}),[a,O,E]);return a&&0!==a.length?(0,P.jsxs)(n.A,{sx:{flexGrow:1,p:3},children:[(0,P.jsx)(n.A,{display:"flex",alignItems:"center",mb:4,children:(0,P.jsxs)(i.A,{variant:"h4",component:"div",sx:{display:"flex",alignItems:"center",gap:2},children:[(0,P.jsx)(s.A,{sx:{bgcolor:"secondary.main"},children:(0,P.jsx)(z.A,{})}),"Analytics: ",N]})}),(0,P.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,P.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,P.jsx)(o.A,{sx:{height:"100%",bgcolor:"#e3f2fd"},children:(0,P.jsxs)(c.A,{children:[(0,P.jsx)(i.A,{color:"textSecondary",gutterBottom:!0,children:"Total Records"}),(0,P.jsx)(i.A,{variant:"h4",children:a.length})]})})}),O.slice(0,3).map(((e,a)=>(0,P.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,P.jsx)(o.A,{sx:{height:"100%"},children:(0,P.jsxs)(c.A,{children:[(0,P.jsxs)(i.A,{color:"textSecondary",gutterBottom:!0,children:[e.label," (Sum)"]}),(0,P.jsx)(i.A,{variant:"h4",sx:{color:"primary.main"},children:e.key.includes("price")||e.key.includes("cost")||e.key.includes("budget")?I(e.sum):e.sum.toLocaleString()}),(0,P.jsxs)(i.A,{variant:"caption",display:"block",children:["Avg: ",e.key.includes("price")?I(e.avg):e.avg.toFixed(2)]})]})})},a)))]}),(0,P.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,P.jsx)(l.Ay,{item:!0,xs:12,md:8,children:(0,P.jsxs)(d.A,{sx:{p:2,display:"flex",flexDirection:"column",height:400},children:[(0,P.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:$.label}),(0,P.jsx)(y.u,{width:"100%",height:"100%",children:(0,P.jsxs)(v.b,{data:$.data,children:[(0,P.jsx)(g.d,{strokeDasharray:"3 3"}),(0,P.jsx)(j.W,{dataKey:"date"}),(0,P.jsx)(f.h,{}),(0,P.jsx)(b.m,{}),(0,P.jsx)(_.s,{}),(0,P.jsx)(A.N1,{type:"monotone",dataKey:"count",stroke:"#8884d8",activeDot:{r:8}})]})})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,P.jsxs)(d.A,{sx:{p:2,height:400,overflow:"auto",bgcolor:"#fff3e0"},children:[(0,P.jsxs)(i.A,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[(0,P.jsx)(M.A,{})," Key Insights"]}),(0,P.jsx)(p.A,{children:K.map(((e,a)=>(0,P.jsxs)(r.Fragment,{children:[(0,P.jsxs)(u.Ay,{children:[(0,P.jsx)(h.A,{children:(0,P.jsx)(F.A,{fontSize:"small"})}),(0,P.jsx)(m.A,{primary:e})]}),(0,P.jsx)(x.A,{component:"li"})]},a)))})]})}),E.map(((e,a)=>(0,P.jsx)(l.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,P.jsxs)(d.A,{sx:{p:2,height:350,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,P.jsxs)(i.A,{variant:"h6",gutterBottom:!0,children:[e.label," Distribution"]}),(0,P.jsx)(y.u,{width:"100%",height:"100%",children:(0,P.jsxs)(S.r,{children:[(0,P.jsx)(k.Fq,{data:e.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:!0,children:e.data.map(((e,a)=>(0,P.jsx)(w.f,{fill:D[a%D.length]},`cell-${a}`)))}),(0,P.jsx)(b.m,{}),(0,P.jsx)(_.s,{})]})})]})},a))),E.length>0&&O.length>0&&(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(d.A,{sx:{p:2,height:400},children:[(0,P.jsxs)(i.A,{variant:"h6",gutterBottom:!0,children:[O[0].label," by ",E[0].label]}),(0,P.jsx)(y.u,{width:"100%",height:"100%",children:(0,P.jsxs)(C.E,{data:E[0].data,children:[(0,P.jsx)(g.d,{strokeDasharray:"3 3"}),(0,P.jsx)(j.W,{dataKey:"name"}),(0,P.jsx)(f.h,{}),(0,P.jsx)(b.m,{}),(0,P.jsx)(_.s,{}),(0,P.jsx)(R.yP,{dataKey:"value",fill:"#82ca9d",name:"Count"})]})})]})})]})]}):(0,P.jsx)(n.A,{p:3,children:(0,P.jsx)(i.A,{variant:"h6",color:"textSecondary",children:"No data available for analysis."})})}},40796:(e,a,t)=>{t.r(a),t.d(a,{actionsConfig:()=>n,modules:()=>i,stepsConfig:()=>r});const r={initialStep:"draft",steps:[{name:"draft",label:"Draft",actions:["submit_for_review","save_draft","delete"]},{name:"ocr_processing",label:"Processing",actions:["ocr_complete","ocr_failed"]},{name:"under_review",label:"Manager Review",actions:["approve_manager","reject","request_changes","delegate"]},{name:"finance_review",label:"Finance Review",actions:["approve_finance","reject_finance","hold_variance"]},{name:"approved",label:"Approved",actions:["mark_ready_for_payment","dispute"]},{name:"ready_for_payment",label:"Ready for Pay",actions:["process_payment","hold_payment"]},{name:"paid",label:"Paid",actions:["archive","issue_referral"]},{name:"disputed",label:"Disputed",actions:["resolve_dispute","archive"]},{name:"rejected",label:"Rejected",actions:["revise","archive"]},{name:"archived",label:"Archived",actions:["restore"]}]},n={submit_for_review:{label:"Submit",type:"primary",nextStep:"under_review",icon:"Send",authorized_role:"user"},save_draft:{label:"Save",type:"secondary",nextStep:"draft",icon:"Save",authorized_role:"user"},delete:{label:"Delete",type:"error",nextStep:"deleted",icon:"Delete",authorized_role:"user"},approve_manager:{label:"Approve (Manager)",type:"success",nextStep:"finance_review",icon:"CheckCircle",authorized_role:"manager"},reject:{label:"Reject",type:"error",nextStep:"rejected",icon:"Cancel",authorized_role:"manager"},request_changes:{label:"Request Info",type:"warning",nextStep:"draft",icon:"Help",authorized_role:"manager"},approve_finance:{label:"Approve (Finance)",type:"success",nextStep:"approved",icon:"VerifiedUser",authorized_role:"accountant"},reject_finance:{label:"Reject (Finance)",type:"error",nextStep:"rejected",icon:"Block",authorized_role:"accountant"},hold_variance:{label:"Hold (Variance)",type:"warning",nextStep:"disputed",icon:"Pause",authorized_role:"accountant"},mark_ready_for_payment:{label:"Release for Pay",type:"primary",nextStep:"ready_for_payment",icon:"Payment",authorized_role:"accountant"},dispute:{label:"Raise Dispute",type:"error",nextStep:"disputed",icon:"ReportProblem",authorized_role:"user"},process_payment:{label:"Mark Paid",type:"success",nextStep:"paid",icon:"AttachMoney",authorized_role:"accountant"},revise:{label:"Revise",type:"primary",nextStep:"draft",icon:"Edit",authorized_role:"user"},restore:{label:"Restore",type:"secondary",nextStep:"draft",icon:"Restore",authorized_role:"admin"},resolve_dispute:{label:"Resolve",type:"success",nextStep:"under_review",icon:"Handshake",authorized_role:"manager"}},i=[{name:"Invoice Capture Hub",type:"General",path:"/apps/vendor-invoices/capture",icon:"CloudUpload",description:"Upload and process new invoices using AI OCR."},{name:"Approval Center",type:"General",path:"/apps/vendor-invoices/approvals",icon:"FactCheck",description:"Manage and approve pending invoices."},{name:"Match PO",type:"Specific",path:"/apps/vendor-invoices/match/:id",icon:"CompareArrows",description:"Match invoice against Purchase Orders."},{name:"Payment Run",type:"General",path:"/apps/vendor-invoices/payments",icon:"Payment",description:"Manage payment batches and settlement."},{name:"Vendor Portal",type:"General",path:"/portal/vendor",icon:"Public",description:"External view for vendors."}]},68072:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var r=t(65043),n=t(96446),i=t(81637),s=t(85865),l=t(88255),o=t(85333),c=t(21256),d=t(40796),p=t(70579);const u=()=>{const[e,a]=(0,r.useState)([]),[t,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(null),x=(0,r.useMemo)((()=>(0,c.h4)(o.collectionName)),[]);return(0,r.useEffect)((()=>{let e=!0;return x.fetchItems().then((t=>{e&&(a(t||[]),u(!1))})).catch((a=>{console.error("Error loading analysis data:",a),e&&(m("Failed to load data."),u(!1))})),()=>{e=!1}}),[x]),t?(0,p.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,p.jsx)(i.A,{})}):h?(0,p.jsx)(s.A,{color:"error",variant:"h6",p:3,children:h}):(0,p.jsx)(l.A,{data:e,fieldsConfig:o.fieldsConfig,collectionName:o.collectionName,modules:d.modules})}}}]);
//# sourceMappingURL=68072.9f45a76f.chunk.js.map