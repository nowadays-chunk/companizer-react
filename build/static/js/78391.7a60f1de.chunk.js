"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[78391],{88255:(e,t,r)=>{r.d(t,{A:()=>E});var s=r(65043),n=r(96446),a=r(85865),l=r(60587),i=r(68903),c=r(12110),o=r(26494),d=r(63336),h=r(35721),x=r(37918),m=r(2050),u=r(48734),j=r(39336),g=r(41180),p=r(75748),y=r(87734),A=r(52185),f=r(6026),b=r(80379),v=r(70095),k=r(28791),S=r(87890),C=r(91281),F=r(17869),N=r(82291),w=r(51619),M=r(16851),B=r(42796),D=r(48304),I=r(70579);const $=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],_=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),E=e=>{let{data:t=[],fieldsConfig:r,collectionName:E,modules:K=[]}=e;const O=(0,s.useMemo)((()=>{if(!t.length)return[];const e=Object.keys(r).filter((e=>"number"===r[e].type&&!e.includes("id")&&"unit_price"!==e));return r.unit_price&&e.push("unit_price"),e.map((e=>{const s=t.reduce(((t,r)=>t+(Number(r[e])||0)),0),n=s/t.length;return{key:e,label:r[e].label,sum:s,avg:n,min:Math.min(...t.map((t=>Number(t[e])||0))),max:Math.max(...t.map((t=>Number(t[e])||0)))}}))}),[t,r]),T=(0,s.useMemo)((()=>{if(!t.length)return[];return Object.keys(r).filter((e=>"select"===r[e].type)).map((e=>{const s=t.reduce(((t,r)=>{const s=r[e]||"Unknown";return t[s]=(t[s]||0)+1,t}),{});return{key:e,label:r[e].label,data:Object.keys(s).map((e=>({name:e,value:s[e]})))}}))}),[t,r]),R=(0,s.useMemo)((()=>{var e;if(!t.length)return[];const s=Object.keys(r).find((e=>"date"===r[e].type||"datetime"===r[e].type))||"created_at",n=t.reduce(((e,t)=>{let r=t[s];if(!r&&t.created_at&&(r=t.created_at),!r)return e;const n=new Date(r).toISOString().slice(0,7);return e[n]=(e[n]||0)+1,e}),{}),a=Object.keys(n).sort().map((e=>({date:e,count:n[e]})));return{label:`Trend over time (${(null===(e=r[s])||void 0===e?void 0:e.label)||"Date"})`,data:a}}),[t,r]),W=(0,s.useMemo)((()=>{if(!t.length)return["No data available to generate insights."];const e=[];return e.push(`Total ${t.length} records analyzed.`),O.forEach((t=>{e.push(`Total ${t.label}: ${t.key.includes("price")||t.key.includes("amount")?_(t.sum):t.sum.toLocaleString()}`)})),T.forEach((t=>{const r=t.data.sort(((e,t)=>t.value-e.value))[0];r&&e.push(`Most common ${t.label}: ${r.name} (${r.value} occurrences)`)})),e}),[t,O,T]);return t&&0!==t.length?(0,I.jsxs)(n.A,{sx:{flexGrow:1,p:3},children:[(0,I.jsx)(n.A,{display:"flex",alignItems:"center",mb:4,children:(0,I.jsxs)(a.A,{variant:"h4",component:"div",sx:{display:"flex",alignItems:"center",gap:2},children:[(0,I.jsx)(l.A,{sx:{bgcolor:"secondary.main"},children:(0,I.jsx)(M.A,{})}),"Analytics: ",E]})}),(0,I.jsxs)(i.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,I.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,I.jsx)(c.A,{sx:{height:"100%",bgcolor:"#e3f2fd"},children:(0,I.jsxs)(o.A,{children:[(0,I.jsx)(a.A,{color:"textSecondary",gutterBottom:!0,children:"Total Records"}),(0,I.jsx)(a.A,{variant:"h4",children:t.length})]})})}),O.slice(0,3).map(((e,t)=>(0,I.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,I.jsx)(c.A,{sx:{height:"100%"},children:(0,I.jsxs)(o.A,{children:[(0,I.jsxs)(a.A,{color:"textSecondary",gutterBottom:!0,children:[e.label," (Sum)"]}),(0,I.jsx)(a.A,{variant:"h4",sx:{color:"primary.main"},children:e.key.includes("price")||e.key.includes("cost")||e.key.includes("budget")?_(e.sum):e.sum.toLocaleString()}),(0,I.jsxs)(a.A,{variant:"caption",display:"block",children:["Avg: ",e.key.includes("price")?_(e.avg):e.avg.toFixed(2)]})]})})},t)))]}),(0,I.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,I.jsx)(i.Ay,{item:!0,xs:12,md:8,children:(0,I.jsxs)(d.A,{sx:{p:2,display:"flex",flexDirection:"column",height:400},children:[(0,I.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:R.label}),(0,I.jsx)(g.u,{width:"100%",height:"100%",children:(0,I.jsxs)(p.b,{data:R.data,children:[(0,I.jsx)(y.d,{strokeDasharray:"3 3"}),(0,I.jsx)(A.W,{dataKey:"date"}),(0,I.jsx)(f.h,{}),(0,I.jsx)(b.m,{}),(0,I.jsx)(v.s,{}),(0,I.jsx)(k.N1,{type:"monotone",dataKey:"count",stroke:"#8884d8",activeDot:{r:8}})]})})]})}),(0,I.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,I.jsxs)(d.A,{sx:{p:2,height:400,overflow:"auto",bgcolor:"#fff3e0"},children:[(0,I.jsxs)(a.A,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[(0,I.jsx)(B.A,{})," Key Insights"]}),(0,I.jsx)(h.A,{children:W.map(((e,t)=>(0,I.jsxs)(s.Fragment,{children:[(0,I.jsxs)(x.Ay,{children:[(0,I.jsx)(m.A,{children:(0,I.jsx)(D.A,{fontSize:"small"})}),(0,I.jsx)(u.A,{primary:e})]}),(0,I.jsx)(j.A,{component:"li"})]},t)))})]})}),T.map(((e,t)=>(0,I.jsx)(i.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,I.jsxs)(d.A,{sx:{p:2,height:350,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,I.jsxs)(a.A,{variant:"h6",gutterBottom:!0,children:[e.label," Distribution"]}),(0,I.jsx)(g.u,{width:"100%",height:"100%",children:(0,I.jsxs)(S.r,{children:[(0,I.jsx)(C.Fq,{data:e.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:!0,children:e.data.map(((e,t)=>(0,I.jsx)(F.f,{fill:$[t%$.length]},`cell-${t}`)))}),(0,I.jsx)(b.m,{}),(0,I.jsx)(v.s,{})]})})]})},t))),T.length>0&&O.length>0&&(0,I.jsx)(i.Ay,{item:!0,xs:12,children:(0,I.jsxs)(d.A,{sx:{p:2,height:400},children:[(0,I.jsxs)(a.A,{variant:"h6",gutterBottom:!0,children:[O[0].label," by ",T[0].label]}),(0,I.jsx)(g.u,{width:"100%",height:"100%",children:(0,I.jsxs)(N.E,{data:T[0].data,children:[(0,I.jsx)(y.d,{strokeDasharray:"3 3"}),(0,I.jsx)(A.W,{dataKey:"name"}),(0,I.jsx)(f.h,{}),(0,I.jsx)(b.m,{}),(0,I.jsx)(v.s,{}),(0,I.jsx)(w.yP,{dataKey:"value",fill:"#82ca9d",name:"Count"})]})})]})})]})]}):(0,I.jsx)(n.A,{p:3,children:(0,I.jsx)(a.A,{variant:"h6",color:"textSecondary",children:"No data available for analysis."})})}},78391:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var s=r(65043),n=r(96446),a=r(81637),l=r(85865),i=r(68903),c=r(63336),o=r(73216),d=r(88255),h=r(34080),x=r(21256),m=r(70579);const u=()=>{const[e,t]=(0,s.useState)([]),[r,u]=(0,s.useState)(!0),[j,g]=(0,s.useState)(null),p=(0,o.Zp)(),y=(0,s.useMemo)((()=>(0,x.h4)(h.collectionName)),[]);if((0,s.useEffect)((()=>{let e=!0;return y.fetchItems().then((r=>{e&&(t(r||[]),u(!1))})).catch((t=>{console.error("Error loading analysis data:",t),e&&(g("Failed to load data."),u(!1))})),()=>{e=!1}}),[y]),r)return(0,m.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,m.jsx)(a.A,{})});if(j)return(0,m.jsx)(l.A,{color:"error",variant:"h6",p:3,children:j});const A=h.modules.filter((e=>"General"===e.type));return(0,m.jsxs)(n.A,{children:[(0,m.jsxs)(n.A,{sx:{mb:4,p:2},children:[(0,m.jsx)(l.A,{variant:"h5",gutterBottom:!0,sx:{mb:3,fontWeight:600},children:"Tax Management Modules"}),(0,m.jsx)(i.Ay,{container:!0,spacing:2,children:A.map((e=>{const t=e.icon;return(0,m.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,lg:2,children:(0,m.jsxs)(c.A,{elevation:0,sx:{p:2,border:"1px solid",borderColor:"divider",borderRadius:2,textAlign:"center",cursor:"pointer",transition:"all 0.2s","&:hover":{borderColor:"primary.main",bgcolor:"action.hover",transform:"translateY(-2px)"}},onClick:()=>p(e.path),children:[(0,m.jsx)(n.A,{sx:{color:"primary.main",mb:1},children:t&&(0,m.jsx)(t,{fontSize:"large"})}),(0,m.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600},children:e.name})]})},e.id)}))})]}),(0,m.jsx)(d.A,{data:e,fieldsConfig:h.fieldsConfig,collectionName:h.collectionName})]})}}}]);
//# sourceMappingURL=78391.7a60f1de.chunk.js.map