{"version":3,"file":"static/js/75182.52f8294b.chunk.js","mappings":"2RAMA,MAwEA,EAxE0BA,KACtB,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,MACPC,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,KACxCC,IAAkBD,EAAAA,EAAAA,WAAS,KAAME,EAAAA,EAAAA,IAAe,sBAEvDC,EAAAA,EAAAA,YAAU,KACNC,GAAiB,GAClB,IAEH,MAAMA,EAAkBC,UACpB,IACI,MAEMC,SAFoBL,EAAeM,cAEjBC,QAAOC,GACZ,sBAAfA,EAAIC,QACHD,EAAIE,iBAAmBF,EAAIE,gBAAgBC,SAAS,uBAEzDb,EAAeO,EACnB,CAAE,MAAOO,GACLC,QAAQD,MAAM,yBAA0BA,EAC5C,GAaJ,OACIE,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,EAAG,EAAEC,SAAA,EACNH,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACG,QAAQ,OAAOC,eAAe,gBAAgBC,WAAW,SAASC,GAAI,EAAEJ,SAAA,EACzEK,EAAAA,EAAAA,KAACC,EAAAA,EAAU,CAACC,QAAQ,KAAIP,SAAC,yBACzBK,EAAAA,EAAAA,KAACG,EAAAA,EAAM,CAACD,QAAQ,YAAYE,MAAM,YAAYC,QAdhCC,KACtBC,MAAM,uGAAuG,EAa5BZ,SAAC,6BAK9EK,EAAAA,EAAAA,KAACQ,EAAAA,GAAI,CAACC,WAAS,EAACC,QAAS,EAAEf,SACC,IAAvBpB,EAAYoC,QACTX,EAAAA,EAAAA,KAACC,EAAAA,EAAU,CAACC,QAAQ,QAAQU,GAAI,CAAElB,EAAG,GAAIC,SAAC,mCAE1CpB,EAAYsC,KAAIC,IACZd,EAAAA,EAAAA,KAACQ,EAAAA,GAAI,CAACO,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAEvB,UAC5BK,EAAAA,EAAAA,KAACmB,EAAAA,EAAI,CAAAxB,UACDH,EAAAA,EAAAA,MAAC4B,EAAAA,EAAW,CAAAzB,SAAA,EACRH,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACG,QAAQ,OAAOC,eAAe,gBAAgBE,GAAI,EAAEJ,SAAA,EACrDK,EAAAA,EAAAA,KAACC,EAAAA,EAAU,CAACC,QAAQ,KAAIP,SAAEmB,EAAQO,kBAClCrB,EAAAA,EAAAA,KAACsB,EAAAA,EAAI,CAACC,MAAOT,EAAQ1B,gBAAiBgB,MAAM,UAAUoB,KAAK,cAE/DhC,EAAAA,EAAAA,MAACS,EAAAA,EAAU,CAACG,MAAM,gBAAeT,SAAA,CAAC,WAASmB,EAAQW,aAAa,IAAEX,EAAQY,aAC1ElC,EAAAA,EAAAA,MAACS,EAAAA,EAAU,CAACG,MAAM,gBAAeT,SAAA,CAAC,QAAMmB,EAAQa,aAEhD3B,EAAAA,EAAAA,KAACP,EAAAA,EAAG,CAACmC,GAAI,EAAEjC,UACPK,EAAAA,EAAAA,KAACG,EAAAA,EAAM,CAACD,QAAQ,WAAWE,MAAM,UAAUyB,WAAS,EAACxB,QAASA,IA/B/EvB,WACVgD,OAAOC,QAAQ,sCACdrD,EAAesD,WAAWC,EAAI,CAAE7C,gBAAiB,OAAQD,OAAQ,OAAQ+C,cAAc,IAAIC,MAAOC,gBACxGvD,IAAiB,EA4BmFwD,CAAWvB,EAAQmB,IAAItC,SAAC,yBAXtEmB,EAAQmB,UAqBxD,C","sources":["components/Management/FinancialManagement/AccountsPayable/Modules/VendorInvoices/PaymentRunManager.js"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Box, Typography, Card, CardContent, Button, Grid, Chip } from '@mui/material';\r\nimport { helpersWrapper } from '../../../../../../utils/firebaseCrudHelpers';\r\nimport { useTranslation } from '../../../../../../contexts/TranslationProvider';\r\n\r\nconst PaymentRunManager = () => {\r\n    const { t } = useTranslation();\r\n    const [dueInvoices, setDueInvoices] = useState([]);\r\n    const [invoicesHelper] = useState(() => helpersWrapper('vendor_invoices'));\r\n\r\n    useEffect(() => {\r\n        loadDueInvoices();\r\n    }, []);\r\n\r\n    const loadDueInvoices = async () => {\r\n        try {\r\n            const allInvoices = await invoicesHelper.fetchItems();\r\n            // Filter for 'Approved' or 'Ready for Pay'\r\n            const due = allInvoices.filter(inv =>\r\n                inv.status === 'ready_for_payment' ||\r\n                (inv.processing_step && inv.processing_step.includes('ready_for_payment'))\r\n            );\r\n            setDueInvoices(due);\r\n        } catch (error) {\r\n            console.error(\"Error loading invoices\", error);\r\n        }\r\n    };\r\n\r\n    const handleCreateBatch = () => {\r\n        alert(\"Payment Batch Feature Plan: This will group selected invoices into a single payment file (SEPA/ACH).\");\r\n    };\r\n\r\n    const markAsPaid = async (id) => {\r\n        if (!window.confirm(\"Mark this invoice as Paid?\")) return;\r\n        await invoicesHelper.updateItem(id, { processing_step: 'paid', status: 'paid', payment_date: new Date().toISOString() });\r\n        loadDueInvoices();\r\n    };\r\n\r\n    return (\r\n        <Box p={3}>\r\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={4}>\r\n                <Typography variant=\"h4\">Payment Run Manager</Typography>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={handleCreateBatch}>\r\n                    Create Payment Batch\r\n                </Button>\r\n            </Box>\r\n\r\n            <Grid container spacing={3}>\r\n                {dueInvoices.length === 0 ? (\r\n                    <Typography variant=\"body1\" sx={{ p: 2 }}>No invoices ready for payment.</Typography>\r\n                ) : (\r\n                    dueInvoices.map(invoice => (\r\n                        <Grid item xs={12} md={6} lg={4} key={invoice.id}>\r\n                            <Card>\r\n                                <CardContent>\r\n                                    <Box display=\"flex\" justifyContent=\"space-between\" mb={2}>\r\n                                        <Typography variant=\"h6\">{invoice.invoice_number}</Typography>\r\n                                        <Chip label={invoice.processing_step} color=\"primary\" size=\"small\" />\r\n                                    </Box>\r\n                                    <Typography color=\"textSecondary\">Amount: {invoice.total_amount} {invoice.currency}</Typography>\r\n                                    <Typography color=\"textSecondary\">Due: {invoice.due_date}</Typography>\r\n\r\n                                    <Box mt={2}>\r\n                                        <Button variant=\"outlined\" color=\"success\" fullWidth onClick={() => markAsPaid(invoice.id)}>\r\n                                            Mark as Paid\r\n                                        </Button>\r\n                                    </Box>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </Grid>\r\n                    ))\r\n                )}\r\n            </Grid>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default PaymentRunManager;\r\n"],"names":["PaymentRunManager","t","useTranslation","dueInvoices","setDueInvoices","useState","invoicesHelper","helpersWrapper","useEffect","loadDueInvoices","async","due","fetchItems","filter","inv","status","processing_step","includes","error","console","_jsxs","Box","p","children","display","justifyContent","alignItems","mb","_jsx","Typography","variant","Button","color","onClick","handleCreateBatch","alert","Grid","container","spacing","length","sx","map","invoice","item","xs","md","lg","Card","CardContent","invoice_number","Chip","label","size","total_amount","currency","due_date","mt","fullWidth","window","confirm","updateItem","id","payment_date","Date","toISOString","markAsPaid"],"sourceRoot":""}