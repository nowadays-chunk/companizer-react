"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[28268,69273],{88255:(e,t,a)=>{a.d(t,{A:()=>B});var r=a(65043),l=a(96446),n=a(85865),i=a(60587),s=a(68903),c=a(12110),d=a(26494),o=a(63336),m=a(35721),u=a(37918),p=a(2050),h=a(48734),x=a(39336),y=a(41180),b=a(75748),f=a(87734),j=a(52185),g=a(6026),k=a(80379),A=a(70095),v=a(28791),_=a(87890),D=a(91281),w=a(17869),S=a(82291),N=a(51619),I=a(16851),C=a(42796),F=a(48304),P=a(70579);const E=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],M=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),B=e=>{let{data:t=[],fieldsConfig:a,collectionName:B,modules:$=[]}=e;const K=(0,r.useMemo)((()=>{if(!t.length)return[];const e=Object.keys(a).filter((e=>"number"===a[e].type&&!e.includes("id")&&"unit_price"!==e));return a.unit_price&&e.push("unit_price"),e.map((e=>{const r=t.reduce(((t,a)=>t+(Number(a[e])||0)),0),l=r/t.length;return{key:e,label:a[e].label,sum:r,avg:l,min:Math.min(...t.map((t=>Number(t[e])||0))),max:Math.max(...t.map((t=>Number(t[e])||0)))}}))}),[t,a]),O=(0,r.useMemo)((()=>{if(!t.length)return[];return Object.keys(a).filter((e=>"select"===a[e].type)).map((e=>{const r=t.reduce(((t,a)=>{const r=a[e]||"Unknown";return t[r]=(t[r]||0)+1,t}),{});return{key:e,label:a[e].label,data:Object.keys(r).map((e=>({name:e,value:r[e]})))}}))}),[t,a]),R=(0,r.useMemo)((()=>{var e;if(!t.length)return[];const r=Object.keys(a).find((e=>"date"===a[e].type||"datetime"===a[e].type))||"created_at",l=t.reduce(((e,t)=>{let a=t[r];if(!a&&t.created_at&&(a=t.created_at),!a)return e;const l=new Date(a).toISOString().slice(0,7);return e[l]=(e[l]||0)+1,e}),{}),n=Object.keys(l).sort().map((e=>({date:e,count:l[e]})));return{label:`Trend over time (${(null===(e=a[r])||void 0===e?void 0:e.label)||"Date"})`,data:n}}),[t,a]),T=(0,r.useMemo)((()=>{if(!t.length)return["No data available to generate insights."];const e=[];return e.push(`Total ${t.length} records analyzed.`),K.forEach((t=>{e.push(`Total ${t.label}: ${t.key.includes("price")||t.key.includes("amount")?M(t.sum):t.sum.toLocaleString()}`)})),O.forEach((t=>{const a=t.data.sort(((e,t)=>t.value-e.value))[0];a&&e.push(`Most common ${t.label}: ${a.name} (${a.value} occurrences)`)})),e}),[t,K,O]);return t&&0!==t.length?(0,P.jsxs)(l.A,{sx:{flexGrow:1,p:3},children:[(0,P.jsx)(l.A,{display:"flex",alignItems:"center",mb:4,children:(0,P.jsxs)(n.A,{variant:"h4",component:"div",sx:{display:"flex",alignItems:"center",gap:2},children:[(0,P.jsx)(i.A,{sx:{bgcolor:"secondary.main"},children:(0,P.jsx)(I.A,{})}),"Analytics: ",B]})}),(0,P.jsxs)(s.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,P.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,P.jsx)(c.A,{sx:{height:"100%",bgcolor:"#e3f2fd"},children:(0,P.jsxs)(d.A,{children:[(0,P.jsx)(n.A,{color:"textSecondary",gutterBottom:!0,children:"Total Records"}),(0,P.jsx)(n.A,{variant:"h4",children:t.length})]})})}),K.slice(0,3).map(((e,t)=>(0,P.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,P.jsx)(c.A,{sx:{height:"100%"},children:(0,P.jsxs)(d.A,{children:[(0,P.jsxs)(n.A,{color:"textSecondary",gutterBottom:!0,children:[e.label," (Sum)"]}),(0,P.jsx)(n.A,{variant:"h4",sx:{color:"primary.main"},children:e.key.includes("price")||e.key.includes("cost")||e.key.includes("budget")?M(e.sum):e.sum.toLocaleString()}),(0,P.jsxs)(n.A,{variant:"caption",display:"block",children:["Avg: ",e.key.includes("price")?M(e.avg):e.avg.toFixed(2)]})]})})},t)))]}),(0,P.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,P.jsx)(s.Ay,{item:!0,xs:12,md:8,children:(0,P.jsxs)(o.A,{sx:{p:2,display:"flex",flexDirection:"column",height:400},children:[(0,P.jsx)(n.A,{variant:"h6",gutterBottom:!0,children:R.label}),(0,P.jsx)(y.u,{width:"100%",height:"100%",children:(0,P.jsxs)(b.b,{data:R.data,children:[(0,P.jsx)(f.d,{strokeDasharray:"3 3"}),(0,P.jsx)(j.W,{dataKey:"date"}),(0,P.jsx)(g.h,{}),(0,P.jsx)(k.m,{}),(0,P.jsx)(A.s,{}),(0,P.jsx)(v.N1,{type:"monotone",dataKey:"count",stroke:"#8884d8",activeDot:{r:8}})]})})]})}),(0,P.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,P.jsxs)(o.A,{sx:{p:2,height:400,overflow:"auto",bgcolor:"#fff3e0"},children:[(0,P.jsxs)(n.A,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[(0,P.jsx)(C.A,{})," Key Insights"]}),(0,P.jsx)(m.A,{children:T.map(((e,t)=>(0,P.jsxs)(r.Fragment,{children:[(0,P.jsxs)(u.Ay,{children:[(0,P.jsx)(p.A,{children:(0,P.jsx)(F.A,{fontSize:"small"})}),(0,P.jsx)(h.A,{primary:e})]}),(0,P.jsx)(x.A,{component:"li"})]},t)))})]})}),O.map(((e,t)=>(0,P.jsx)(s.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,P.jsxs)(o.A,{sx:{p:2,height:350,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,P.jsxs)(n.A,{variant:"h6",gutterBottom:!0,children:[e.label," Distribution"]}),(0,P.jsx)(y.u,{width:"100%",height:"100%",children:(0,P.jsxs)(_.r,{children:[(0,P.jsx)(D.Fq,{data:e.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:!0,children:e.data.map(((e,t)=>(0,P.jsx)(w.f,{fill:E[t%E.length]},`cell-${t}`)))}),(0,P.jsx)(k.m,{}),(0,P.jsx)(A.s,{})]})})]})},t))),O.length>0&&K.length>0&&(0,P.jsx)(s.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{sx:{p:2,height:400},children:[(0,P.jsxs)(n.A,{variant:"h6",gutterBottom:!0,children:[K[0].label," by ",O[0].label]}),(0,P.jsx)(y.u,{width:"100%",height:"100%",children:(0,P.jsxs)(S.E,{data:O[0].data,children:[(0,P.jsx)(f.d,{strokeDasharray:"3 3"}),(0,P.jsx)(j.W,{dataKey:"name"}),(0,P.jsx)(g.h,{}),(0,P.jsx)(k.m,{}),(0,P.jsx)(A.s,{}),(0,P.jsx)(N.yP,{dataKey:"value",fill:"#82ca9d",name:"Count"})]})})]})})]})]}):(0,P.jsx)(l.A,{p:3,children:(0,P.jsx)(n.A,{variant:"h6",color:"textSecondary",children:"No data available for analysis."})})}},69273:(e,t,a)=>{a.r(t),a.d(t,{collectionName:()=>n,entityName:()=>l,fieldsConfig:()=>r});const r={notes:{label:"Notes",type:"text",multiline:!0,rows:2,faker:"lorem.sentence"},description:{label:"Description",type:"text",multiline:!0,rows:3,faker:"lorem.paragraph"},priority:{label:"Priority",type:"select",options:[{id:"low",label:"Low"},{id:"medium",label:"Medium"},{id:"high",label:"High"}],faker:"random.arrayElement"},status_detail:{label:"Detail Status",type:"select",options:[{id:"pending",label:"Pending"},{id:"verified",label:"Verified"},{id:"rejected",label:"Rejected"}],faker:"random.arrayElement"},effective_date:{label:"Effective Date",type:"date",faker:"date.recent"},accountable_id:{label:"Accountable ID",type:"text",faker:"datatype.uuid"},project_code:{label:"Project Code",type:"text",faker:"datatype.string"},milestone_phase:{label:"Phase",type:"text",faker:"lorem.word"},completion_percentage:{label:"Completion %",type:"number",faker:"datatype.number"},resource_allocation:{label:"Resource Alloc",type:"number",faker:"datatype.number"},quality_check:{label:"QC Passed",type:"checkbox",faker:"datatype.boolean"},vendor_id:{label:"Vendor ID",type:"text",faker:"datatype.uuid"},delivery_date:{label:"Delivery Date",type:"date",faker:"date.future"},shipment_tracking:{label:"Tracking #",type:"text",faker:"datatype.string"},warehouse_location:{label:"Warehouse Loc",type:"text",faker:"address.zipCode"},serial_number:{label:"Serial #",type:"text",faker:"datatype.string"},maintenance_due:{label:"Maintenance Due",type:"date",faker:"date.future"},incident_report:{label:"Incident Report",type:"text",faker:"lorem.sentence"},batch_number:{label:"Batch #",type:"text",faker:"datatype.string"},detail_id:{label:"Detail ID",type:"text",faker:"datatype.uuid"},parent_id:{label:"Parent ID",type:"text",faker:"datatype.uuid"},item_name:{label:"Item Name",type:"text",faker:"commerce.productName"},description:{label:"Description",type:"text",multiline:!0,rows:2,faker:"commerce.productDescription"},quantity:{label:"Quantity",type:"number",faker:"datatype.number"},unit_price:{label:"Unit Price",type:"number",faker:"finance.amount"},total_price:{label:"Total Price",type:"number",faker:"finance.amount",decimals:2},processing_step:{label:"Processing Step",type:"select",options:[{id:"draft",label:"Draft"}],faker:"random.arrayElement"}},l="Payslips Details",n="payslips_details"},28268:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var r=a(65043),l=a(96446),n=a(81637),i=a(85865),s=a(88255),c=a(69273),d=a(21256),o=a(70579);const m=()=>{const[e,t]=(0,r.useState)([]),[a,m]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null),h=(0,r.useMemo)((()=>(0,d.h4)(c.collectionName)),[]);return(0,r.useEffect)((()=>{let e=!0;return h.fetchItems().then((a=>{e&&(t(a||[]),m(!1))})).catch((t=>{console.error("Error loading analysis data:",t),e&&(p("Failed to load data."),m(!1))})),()=>{e=!1}}),[h]),a?(0,o.jsx)(l.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,o.jsx)(n.A,{})}):u?(0,o.jsx)(i.A,{color:"error",variant:"h6",p:3,children:u}):(0,o.jsx)(s.A,{data:e,fieldsConfig:c.fieldsConfig,collectionName:c.collectionName})}}}]);
//# sourceMappingURL=28268.23f5ea0c.chunk.js.map