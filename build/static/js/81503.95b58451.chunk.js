"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[81503,74504],{88255:(e,t,a)=>{a.d(t,{A:()=>$});var l=a(65043),n=a(96446),s=a(85865),r=a(60587),i=a(68903),c=a(12110),d=a(26494),o=a(63336),h=a(35721),x=a(37918),u=a(2050),m=a(48734),y=a(39336),j=a(41180),p=a(75748),g=a(87734),b=a(52185),A=a(6026),f=a(80379),v=a(70095),k=a(28791),_=a(87890),O=a(91281),S=a(17869),D=a(82291),N=a(51619),C=a(16851),w=a(42796),F=a(48304),B=a(70579);const I=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],M=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),$=e=>{let{data:t=[],fieldsConfig:a,collectionName:$,modules:E=[]}=e;const K=(0,l.useMemo)((()=>{if(!t.length)return[];const e=Object.keys(a).filter((e=>"number"===a[e].type&&!e.includes("id")&&"unit_price"!==e));return a.unit_price&&e.push("unit_price"),e.map((e=>{const l=t.reduce(((t,a)=>t+(Number(a[e])||0)),0),n=l/t.length;return{key:e,label:a[e].label,sum:l,avg:n,min:Math.min(...t.map((t=>Number(t[e])||0))),max:Math.max(...t.map((t=>Number(t[e])||0)))}}))}),[t,a]),T=(0,l.useMemo)((()=>{if(!t.length)return[];return Object.keys(a).filter((e=>"select"===a[e].type)).map((e=>{const l=t.reduce(((t,a)=>{const l=a[e]||"Unknown";return t[l]=(t[l]||0)+1,t}),{});return{key:e,label:a[e].label,data:Object.keys(l).map((e=>({name:e,value:l[e]})))}}))}),[t,a]),P=(0,l.useMemo)((()=>{var e;if(!t.length)return[];const l=Object.keys(a).find((e=>"date"===a[e].type||"datetime"===a[e].type))||"created_at",n=t.reduce(((e,t)=>{let a=t[l];if(!a&&t.created_at&&(a=t.created_at),!a)return e;const n=new Date(a).toISOString().slice(0,7);return e[n]=(e[n]||0)+1,e}),{}),s=Object.keys(n).sort().map((e=>({date:e,count:n[e]})));return{label:`Trend over time (${(null===(e=a[l])||void 0===e?void 0:e.label)||"Date"})`,data:s}}),[t,a]),R=(0,l.useMemo)((()=>{if(!t.length)return["No data available to generate insights."];const e=[];return e.push(`Total ${t.length} records analyzed.`),K.forEach((t=>{e.push(`Total ${t.label}: ${t.key.includes("price")||t.key.includes("amount")?M(t.sum):t.sum.toLocaleString()}`)})),T.forEach((t=>{const a=t.data.sort(((e,t)=>t.value-e.value))[0];a&&e.push(`Most common ${t.label}: ${a.name} (${a.value} occurrences)`)})),e}),[t,K,T]);return t&&0!==t.length?(0,B.jsxs)(n.A,{sx:{flexGrow:1,p:3},children:[(0,B.jsx)(n.A,{display:"flex",alignItems:"center",mb:4,children:(0,B.jsxs)(s.A,{variant:"h4",component:"div",sx:{display:"flex",alignItems:"center",gap:2},children:[(0,B.jsx)(r.A,{sx:{bgcolor:"secondary.main"},children:(0,B.jsx)(C.A,{})}),"Analytics: ",$]})}),(0,B.jsxs)(i.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,B.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,B.jsx)(c.A,{sx:{height:"100%",bgcolor:"#e3f2fd"},children:(0,B.jsxs)(d.A,{children:[(0,B.jsx)(s.A,{color:"textSecondary",gutterBottom:!0,children:"Total Records"}),(0,B.jsx)(s.A,{variant:"h4",children:t.length})]})})}),K.slice(0,3).map(((e,t)=>(0,B.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,B.jsx)(c.A,{sx:{height:"100%"},children:(0,B.jsxs)(d.A,{children:[(0,B.jsxs)(s.A,{color:"textSecondary",gutterBottom:!0,children:[e.label," (Sum)"]}),(0,B.jsx)(s.A,{variant:"h4",sx:{color:"primary.main"},children:e.key.includes("price")||e.key.includes("cost")||e.key.includes("budget")?M(e.sum):e.sum.toLocaleString()}),(0,B.jsxs)(s.A,{variant:"caption",display:"block",children:["Avg: ",e.key.includes("price")?M(e.avg):e.avg.toFixed(2)]})]})})},t)))]}),(0,B.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,B.jsx)(i.Ay,{item:!0,xs:12,md:8,children:(0,B.jsxs)(o.A,{sx:{p:2,display:"flex",flexDirection:"column",height:400},children:[(0,B.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:P.label}),(0,B.jsx)(j.u,{width:"100%",height:"100%",children:(0,B.jsxs)(p.b,{data:P.data,children:[(0,B.jsx)(g.d,{strokeDasharray:"3 3"}),(0,B.jsx)(b.W,{dataKey:"date"}),(0,B.jsx)(A.h,{}),(0,B.jsx)(f.m,{}),(0,B.jsx)(v.s,{}),(0,B.jsx)(k.N1,{type:"monotone",dataKey:"count",stroke:"#8884d8",activeDot:{r:8}})]})})]})}),(0,B.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,B.jsxs)(o.A,{sx:{p:2,height:400,overflow:"auto",bgcolor:"#fff3e0"},children:[(0,B.jsxs)(s.A,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[(0,B.jsx)(w.A,{})," Key Insights"]}),(0,B.jsx)(h.A,{children:R.map(((e,t)=>(0,B.jsxs)(l.Fragment,{children:[(0,B.jsxs)(x.Ay,{children:[(0,B.jsx)(u.A,{children:(0,B.jsx)(F.A,{fontSize:"small"})}),(0,B.jsx)(m.A,{primary:e})]}),(0,B.jsx)(y.A,{component:"li"})]},t)))})]})}),T.map(((e,t)=>(0,B.jsx)(i.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,B.jsxs)(o.A,{sx:{p:2,height:350,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,B.jsxs)(s.A,{variant:"h6",gutterBottom:!0,children:[e.label," Distribution"]}),(0,B.jsx)(j.u,{width:"100%",height:"100%",children:(0,B.jsxs)(_.r,{children:[(0,B.jsx)(O.Fq,{data:e.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:!0,children:e.data.map(((e,t)=>(0,B.jsx)(S.f,{fill:I[t%I.length]},`cell-${t}`)))}),(0,B.jsx)(f.m,{}),(0,B.jsx)(v.s,{})]})})]})},t))),T.length>0&&K.length>0&&(0,B.jsx)(i.Ay,{item:!0,xs:12,children:(0,B.jsxs)(o.A,{sx:{p:2,height:400},children:[(0,B.jsxs)(s.A,{variant:"h6",gutterBottom:!0,children:[K[0].label," by ",T[0].label]}),(0,B.jsx)(j.u,{width:"100%",height:"100%",children:(0,B.jsxs)(D.E,{data:T[0].data,children:[(0,B.jsx)(g.d,{strokeDasharray:"3 3"}),(0,B.jsx)(b.W,{dataKey:"name"}),(0,B.jsx)(A.h,{}),(0,B.jsx)(f.m,{}),(0,B.jsx)(v.s,{}),(0,B.jsx)(N.yP,{dataKey:"value",fill:"#82ca9d",name:"Count"})]})})]})})]})]}):(0,B.jsx)(n.A,{p:3,children:(0,B.jsx)(s.A,{variant:"h6",color:"textSecondary",children:"No data available for analysis."})})}},74504:(e,t,a)=>{a.r(t),a.d(t,{collectionName:()=>s,entityName:()=>n,fieldsConfig:()=>l});const l={journal_number:{label:"Journal #",type:"text",readOnly:!0},posting_date:{label:"Posting Date",type:"date",readOnly:!0},status:{label:"Status",type:"text",readOnly:!0},description:{label:"Description",type:"text",multiline:!0,rows:3},total_debit:{label:"Total Debit",type:"number",readOnly:!0},total_credit:{label:"Total Credit",type:"number",readOnly:!0},currency_code:{label:"Currency",type:"text",readOnly:!0},created_by:{label:"Created By",type:"text",readOnly:!0},posted_at:{label:"Posted At",type:"date",readOnly:!0},posted_by:{label:"Posted By",type:"text",readOnly:!0}},n="Journal Entries Details",s="journal_entries"},81503:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var l=a(65043),n=a(96446),s=a(81637),r=a(85865),i=a(88255),c=a(74504),d=a(21256),o=a(70579);const h=()=>{const[e,t]=(0,l.useState)([]),[a,h]=(0,l.useState)(!0),[x,u]=(0,l.useState)(null),m=(0,l.useMemo)((()=>(0,d.h4)(c.collectionName)),[]);return(0,l.useEffect)((()=>{let e=!0;return m.fetchItems().then((a=>{e&&(t(a||[]),h(!1))})).catch((t=>{console.error("Error loading analysis data:",t),e&&(u("Failed to load data."),h(!1))})),()=>{e=!1}}),[m]),a?(0,o.jsx)(n.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,o.jsx)(s.A,{})}):x?(0,o.jsx)(r.A,{color:"error",variant:"h6",p:3,children:x}):(0,o.jsx)(i.A,{data:e,fieldsConfig:c.fieldsConfig,collectionName:c.collectionName})}}}]);
//# sourceMappingURL=81503.95b58451.chunk.js.map