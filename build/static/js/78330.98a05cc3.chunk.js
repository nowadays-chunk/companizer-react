"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[78330,81459],{88255:(e,t,a)=>{a.d(t,{A:()=>M});var n=a(65043),l=a(96446),r=a(85865),i=a(60587),s=a(68903),c=a(12110),o=a(26494),d=a(63336),u=a(35721),m=a(37918),h=a(2050),x=a(48734),p=a(39336),y=a(41180),f=a(75748),b=a(87734),j=a(52185),g=a(6026),k=a(80379),A=a(70095),v=a(28791),_=a(87890),D=a(91281),S=a(17869),N=a(82291),C=a(51619),w=a(16851),I=a(42796),E=a(48304),R=a(70579);const F=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],B=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),M=e=>{let{data:t=[],fieldsConfig:a,collectionName:M,modules:U=[]}=e;const P=(0,n.useMemo)((()=>{if(!t.length)return[];const e=Object.keys(a).filter((e=>"number"===a[e].type&&!e.includes("id")&&"unit_price"!==e));return a.unit_price&&e.push("unit_price"),e.map((e=>{const n=t.reduce(((t,a)=>t+(Number(a[e])||0)),0),l=n/t.length;return{key:e,label:a[e].label,sum:n,avg:l,min:Math.min(...t.map((t=>Number(t[e])||0))),max:Math.max(...t.map((t=>Number(t[e])||0)))}}))}),[t,a]),T=(0,n.useMemo)((()=>{if(!t.length)return[];return Object.keys(a).filter((e=>"select"===a[e].type)).map((e=>{const n=t.reduce(((t,a)=>{const n=a[e]||"Unknown";return t[n]=(t[n]||0)+1,t}),{});return{key:e,label:a[e].label,data:Object.keys(n).map((e=>({name:e,value:n[e]})))}}))}),[t,a]),$=(0,n.useMemo)((()=>{var e;if(!t.length)return[];const n=Object.keys(a).find((e=>"date"===a[e].type||"datetime"===a[e].type))||"created_at",l=t.reduce(((e,t)=>{let a=t[n];if(!a&&t.created_at&&(a=t.created_at),!a)return e;const l=new Date(a).toISOString().slice(0,7);return e[l]=(e[l]||0)+1,e}),{}),r=Object.keys(l).sort().map((e=>({date:e,count:l[e]})));return{label:`Trend over time (${(null===(e=a[n])||void 0===e?void 0:e.label)||"Date"})`,data:r}}),[t,a]),K=(0,n.useMemo)((()=>{if(!t.length)return["No data available to generate insights."];const e=[];return e.push(`Total ${t.length} records analyzed.`),P.forEach((t=>{e.push(`Total ${t.label}: ${t.key.includes("price")||t.key.includes("amount")?B(t.sum):t.sum.toLocaleString()}`)})),T.forEach((t=>{const a=t.data.sort(((e,t)=>t.value-e.value))[0];a&&e.push(`Most common ${t.label}: ${a.name} (${a.value} occurrences)`)})),e}),[t,P,T]);return t&&0!==t.length?(0,R.jsxs)(l.A,{sx:{flexGrow:1,p:3},children:[(0,R.jsx)(l.A,{display:"flex",alignItems:"center",mb:4,children:(0,R.jsxs)(r.A,{variant:"h4",component:"div",sx:{display:"flex",alignItems:"center",gap:2},children:[(0,R.jsx)(i.A,{sx:{bgcolor:"secondary.main"},children:(0,R.jsx)(w.A,{})}),"Analytics: ",M]})}),(0,R.jsxs)(s.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,R.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,R.jsx)(c.A,{sx:{height:"100%",bgcolor:"#e3f2fd"},children:(0,R.jsxs)(o.A,{children:[(0,R.jsx)(r.A,{color:"textSecondary",gutterBottom:!0,children:"Total Records"}),(0,R.jsx)(r.A,{variant:"h4",children:t.length})]})})}),P.slice(0,3).map(((e,t)=>(0,R.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,R.jsx)(c.A,{sx:{height:"100%"},children:(0,R.jsxs)(o.A,{children:[(0,R.jsxs)(r.A,{color:"textSecondary",gutterBottom:!0,children:[e.label," (Sum)"]}),(0,R.jsx)(r.A,{variant:"h4",sx:{color:"primary.main"},children:e.key.includes("price")||e.key.includes("cost")||e.key.includes("budget")?B(e.sum):e.sum.toLocaleString()}),(0,R.jsxs)(r.A,{variant:"caption",display:"block",children:["Avg: ",e.key.includes("price")?B(e.avg):e.avg.toFixed(2)]})]})})},t)))]}),(0,R.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,R.jsx)(s.Ay,{item:!0,xs:12,md:8,children:(0,R.jsxs)(d.A,{sx:{p:2,display:"flex",flexDirection:"column",height:400},children:[(0,R.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:$.label}),(0,R.jsx)(y.u,{width:"100%",height:"100%",children:(0,R.jsxs)(f.b,{data:$.data,children:[(0,R.jsx)(b.d,{strokeDasharray:"3 3"}),(0,R.jsx)(j.W,{dataKey:"date"}),(0,R.jsx)(g.h,{}),(0,R.jsx)(k.m,{}),(0,R.jsx)(A.s,{}),(0,R.jsx)(v.N1,{type:"monotone",dataKey:"count",stroke:"#8884d8",activeDot:{r:8}})]})})]})}),(0,R.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(d.A,{sx:{p:2,height:400,overflow:"auto",bgcolor:"#fff3e0"},children:[(0,R.jsxs)(r.A,{variant:"h6",gutterBottom:!0,display:"flex",alignItems:"center",gap:1,children:[(0,R.jsx)(I.A,{})," Key Insights"]}),(0,R.jsx)(u.A,{children:K.map(((e,t)=>(0,R.jsxs)(n.Fragment,{children:[(0,R.jsxs)(m.Ay,{children:[(0,R.jsx)(h.A,{children:(0,R.jsx)(E.A,{fontSize:"small"})}),(0,R.jsx)(x.A,{primary:e})]}),(0,R.jsx)(p.A,{component:"li"})]},t)))})]})}),T.map(((e,t)=>(0,R.jsx)(s.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,R.jsxs)(d.A,{sx:{p:2,height:350,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,R.jsxs)(r.A,{variant:"h6",gutterBottom:!0,children:[e.label," Distribution"]}),(0,R.jsx)(y.u,{width:"100%",height:"100%",children:(0,R.jsxs)(_.r,{children:[(0,R.jsx)(D.Fq,{data:e.data,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:!0,children:e.data.map(((e,t)=>(0,R.jsx)(S.f,{fill:F[t%F.length]},`cell-${t}`)))}),(0,R.jsx)(k.m,{}),(0,R.jsx)(A.s,{})]})})]})},t))),T.length>0&&P.length>0&&(0,R.jsx)(s.Ay,{item:!0,xs:12,children:(0,R.jsxs)(d.A,{sx:{p:2,height:400},children:[(0,R.jsxs)(r.A,{variant:"h6",gutterBottom:!0,children:[P[0].label," by ",T[0].label]}),(0,R.jsx)(y.u,{width:"100%",height:"100%",children:(0,R.jsxs)(N.E,{data:T[0].data,children:[(0,R.jsx)(b.d,{strokeDasharray:"3 3"}),(0,R.jsx)(j.W,{dataKey:"name"}),(0,R.jsx)(g.h,{}),(0,R.jsx)(k.m,{}),(0,R.jsx)(A.s,{}),(0,R.jsx)(C.yP,{dataKey:"value",fill:"#82ca9d",name:"Count"})]})})]})})]})]}):(0,R.jsx)(l.A,{p:3,children:(0,R.jsx)(r.A,{variant:"h6",color:"textSecondary",children:"No data available for analysis."})})}},81459:(e,t,a)=>{a.r(t),a.d(t,{collectionName:()=>r,entityName:()=>l,fieldsConfig:()=>n});const n={notes:{label:"Notes",type:"text",multiline:!0,rows:2,faker:"lorem.sentence"},description:{label:"Description",type:"text",multiline:!0,rows:3,faker:"lorem.paragraph"},priority:{label:"Priority",type:"select",options:[{id:"low",label:"Low"},{id:"medium",label:"Medium"},{id:"high",label:"High"}],faker:"random.arrayElement"},status_detail:{label:"Detail Status",type:"select",options:[{id:"pending",label:"Pending"},{id:"verified",label:"Verified"},{id:"rejected",label:"Rejected"}],faker:"random.arrayElement"},effective_date:{label:"Effective Date",type:"date",faker:"date.recent"},accountable_id:{label:"Accountable ID",type:"text",faker:"datatype.uuid"},transaction_date:{label:"Transaction Date",type:"date",faker:"date.recent"},due_date:{label:"Due Date",type:"date",faker:"date.future"},currency:{label:"Currency",type:"select",options:[{id:"USD",label:"USD"},{id:"EUR",label:"EUR"}],faker:"finance.currencyCode"},exchange_rate:{label:"Exchange Rate",type:"number",faker:"finance.amount"},tax_amount:{label:"Tax Amount",type:"number",faker:"finance.amount"},net_amount:{label:"Net Amount",type:"number",faker:"finance.amount"},payment_method:{label:"Payment Method",type:"select",options:[{id:"bank",label:"Bank"},{id:"card",label:"Card"}],faker:"finance.transactionType"},invoice_reference:{label:"Invoice Ref",type:"text",faker:"finance.account"},cost_center:{label:"Cost Center",type:"text",faker:"finance.accountName"},bank_account:{label:"Bank Account",type:"text",faker:"finance.account"},ledger_code:{label:"Ledger Code",type:"text",faker:"finance.bic"},approval_code:{label:"Approval Code",type:"text",faker:"datatype.string"},is_reimbursable:{label:"Reimbursable",type:"checkbox",faker:"datatype.boolean"},receipt_url:{label:"Receipt URL",type:"text",faker:"internet.url"},detail_id:{label:"Detail ID",type:"text",faker:"datatype.uuid"},parent_id:{label:"Parent ID",type:"text",faker:"datatype.uuid"},item_name:{label:"Item Name",type:"text",faker:"commerce.productName"},description:{label:"Description",type:"text",multiline:!0,rows:2,faker:"commerce.productDescription"},quantity:{label:"Quantity",type:"number",faker:"datatype.number"},unit_price:{label:"Unit Price",type:"number",faker:"finance.amount"},total_price:{label:"Total Price",type:"number",faker:"finance.amount",decimals:2},processing_step:{label:"Processing Step",type:"select",options:[{id:"draft",label:"Draft"}],faker:"random.arrayElement"}},l="Reconciliation Statements Details",r="reconciliation_statements_details"},78330:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(65043),l=a(96446),r=a(81637),i=a(85865),s=a(88255),c=a(81459),o=a(21256),d=a(70579);const u=()=>{const[e,t]=(0,n.useState)([]),[a,u]=(0,n.useState)(!0),[m,h]=(0,n.useState)(null),x=(0,n.useMemo)((()=>(0,o.h4)(c.collectionName)),[]);return(0,n.useEffect)((()=>{let e=!0;return x.fetchItems().then((a=>{e&&(t(a||[]),u(!1))})).catch((t=>{console.error("Error loading analysis data:",t),e&&(h("Failed to load data."),u(!1))})),()=>{e=!1}}),[x]),a?(0,d.jsx)(l.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,d.jsx)(r.A,{})}):m?(0,d.jsx)(i.A,{color:"error",variant:"h6",p:3,children:m}):(0,d.jsx)(s.A,{data:e,fieldsConfig:c.fieldsConfig,collectionName:c.collectionName})}}}]);
//# sourceMappingURL=78330.98a05cc3.chunk.js.map