-- Source: frontend\src\components\Management\FinancialManagement\AccountsPayable\CreditorsLedger.js
DROP TABLE IF EXISTS `creditors_ledger`;
CREATE TABLE IF NOT EXISTS `creditors_ledger` (
    `id` INT AUTO_INCREMENT PRIMARY KEY,
    `created_at` TIMESTAMP NULL, 
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
    `organization_id` VARCHAR(255) NOT NULL,
    `creditor_id` VARCHAR(255) DEFAULT NULL,
    `vendor_id` VARCHAR(255) NOT NULL,
    `creditor_name` VARCHAR(255) NOT NULL,
    `creditor_account_number` VARCHAR(255) DEFAULT NULL,
    `contact_number` VARCHAR(255) DEFAULT NULL,
    `entity_code` VARCHAR(255) NOT NULL,
    `company_code` VARCHAR(255) NOT NULL,
    `business_unit` VARCHAR(255) DEFAULT NULL,
    `fiscal_year` INT NOT NULL,
    `fiscal_period` INT NOT NULL,
    `posting_date` DATE NOT NULL,
    `document_date` DATE NOT NULL,
    `gl_control_account` VARCHAR(255) NOT NULL,
    `subledger_account` VARCHAR(255) DEFAULT NULL,
    `ledger_mode` VARCHAR(100) DEFAULT NULL,
    `version_number` INT DEFAULT NULL,
    `is_current_version` VARCHAR(255) DEFAULT NULL,
    `superseded_by` VARCHAR(255) DEFAULT NULL,
    `immutable_record` VARCHAR(255) DEFAULT NULL,
    `transaction_type` VARCHAR(100) NOT NULL,
    `source_document_type` VARCHAR(255) DEFAULT NULL,
    `source_document_id` VARCHAR(255) DEFAULT NULL,
    `source_document_number` VARCHAR(255) DEFAULT NULL,
    `is_intercompany` VARCHAR(255) DEFAULT NULL,
    `intercompany_partner` VARCHAR(255) DEFAULT NULL,
    `is_accrual` VARCHAR(255) DEFAULT NULL,
    `is_prepaid` VARCHAR(255) DEFAULT NULL,
    `accrual_reversal_date` DATE DEFAULT NULL,
    `is_fx_revaluation` VARCHAR(255) DEFAULT NULL,
    `revaluation_run_id` VARCHAR(255) DEFAULT NULL,
    `is_system_generated` VARCHAR(255) DEFAULT NULL,
    `posting_source` VARCHAR(255) DEFAULT NULL,
    `open_item_id` VARCHAR(255) DEFAULT NULL,
    `open_item_status` VARCHAR(100) DEFAULT NULL,
    `original_amount` INT NOT NULL,
    `cleared_amount` INT DEFAULT NULL,
    `residual_amount` INT DEFAULT NULL,
    `clearing_document_id` VARCHAR(255) DEFAULT NULL,
    `clearing_document_number` VARCHAR(255) DEFAULT NULL,
    `clearing_date` DATE DEFAULT NULL,
    `clearing_method` VARCHAR(100) DEFAULT NULL,
    `partial_payment_count` INT DEFAULT NULL,
    `settlement_group_id` VARCHAR(255) DEFAULT NULL,
    `is_disputed` VARCHAR(255) DEFAULT NULL,
    `dispute_reason` VARCHAR(255) DEFAULT NULL,
    `is_on_hold` VARCHAR(255) DEFAULT NULL,
    `hold_reason` VARCHAR(255) DEFAULT NULL,
    `is_blocked_for_payment` VARCHAR(255) DEFAULT NULL,
    `payment_block_reason` VARCHAR(255) DEFAULT NULL,
    `promise_to_pay_date` DATE DEFAULT NULL,
    `due_date` DATE NOT NULL,
    `baseline_date` DATE DEFAULT NULL,
    `aging_bucket` VARCHAR(100) DEFAULT NULL,
    `days_overdue` INT DEFAULT NULL,
    `is_overdue` VARCHAR(255) DEFAULT NULL,
    `weighted_avg_due_days` INT DEFAULT NULL,
    `dpo_contribution` INT DEFAULT NULL,
    `cash_requirement_date` DATE DEFAULT NULL,
    `payment_priority_score` INT DEFAULT NULL,
    `is_high_risk_overdue` VARCHAR(255) DEFAULT NULL,
    `aging_snapshot_date` DATE DEFAULT NULL,
    `reconciliation_status` VARCHAR(100) DEFAULT NULL,
    `last_reconciliation_date` DATE DEFAULT NULL,
    `reconciliation_run_id` VARCHAR(255) DEFAULT NULL,
    `out_of_balance_amount` INT DEFAULT NULL,
    `clearing_difference` INT DEFAULT NULL,
    `write_off_amount` INT DEFAULT NULL,
    `write_off_reason` VARCHAR(255) DEFAULT NULL,
    `write_off_date` DATE DEFAULT NULL,
    `tolerance_variance` INT DEFAULT NULL,
    `is_within_tolerance` VARCHAR(255) DEFAULT NULL,
    `is_suspense_account` VARCHAR(255) DEFAULT NULL,
    `suspense_reason` VARCHAR(255) DEFAULT NULL,
    `reconciliation_approval_status` VARCHAR(100) DEFAULT NULL,
    `audit_evidence_ids` VARCHAR(255) DEFAULT NULL,
    `transaction_currency` VARCHAR(100) NOT NULL,
    `transaction_amount` INT NOT NULL,
    `local_currency` VARCHAR(255) DEFAULT NULL,
    `local_amount` INT DEFAULT NULL,
    `group_currency` VARCHAR(255) DEFAULT NULL,
    `group_amount` INT DEFAULT NULL,
    `fx_rate` INT DEFAULT NULL,
    `fx_rate_date` DATE DEFAULT NULL,
    `fx_rate_type` VARCHAR(100) DEFAULT NULL,
    `realized_fx_gain_loss` INT DEFAULT NULL,
    `unrealized_fx_revaluation` INT DEFAULT NULL,
    `fx_difference_account` VARCHAR(255) DEFAULT NULL,
    `vat_payable_amount` INT DEFAULT NULL,
    `vat_code` VARCHAR(255) DEFAULT NULL,
    `withholding_tax_amount` INT DEFAULT NULL,
    `withholding_tax_code` VARCHAR(255) DEFAULT NULL,
    `is_reverse_charge` VARCHAR(255) DEFAULT NULL,
    `reverse_charge_amount` INT DEFAULT NULL,
    `tax_authority_creditor_id` VARCHAR(255) DEFAULT NULL,
    `is_statutory_reporting` VARCHAR(255) DEFAULT NULL,
    `statutory_report_id` VARCHAR(255) DEFAULT NULL,
    `tax_reconciliation_status` VARCHAR(100) DEFAULT NULL,
    `dispute_status` VARCHAR(100) DEFAULT NULL,
    `dispute_reason_code` VARCHAR(255) DEFAULT NULL,
    `dispute_amount` INT DEFAULT NULL,
    `dispute_workflow_stage` VARCHAR(255) DEFAULT NULL,
    `dispute_raised_date` DATE DEFAULT NULL,
    `dispute_resolved_date` DATE DEFAULT NULL,
    `exception_type` VARCHAR(100) DEFAULT NULL,
    `hold_reason_code` VARCHAR(255) DEFAULT NULL,
    `legal_hold` VARCHAR(255) DEFAULT NULL,
    `vendor_risk_hold` VARCHAR(255) DEFAULT NULL,
    `compliance_hold` VARCHAR(255) DEFAULT NULL,
    `quality_issue_hold` VARCHAR(255) DEFAULT NULL,
    `risk_indicator` VARCHAR(100) DEFAULT NULL,
    `payment_proposal_id` VARCHAR(255) DEFAULT NULL,
    `payment_batch_id` VARCHAR(255) DEFAULT NULL,
    `payment_run_date` DATE DEFAULT NULL,
    `settlement_posting_date` DATE DEFAULT NULL,
    `settlement_document_id` VARCHAR(255) DEFAULT NULL,
    `overpayment_amount` INT DEFAULT NULL,
    `credit_balance_carryforward` INT DEFAULT NULL,
    `netting_settlement_id` VARCHAR(255) DEFAULT NULL,
    `is_netting_eligible` VARCHAR(255) DEFAULT NULL,
    `bank_reconciliation_status` VARCHAR(100) DEFAULT NULL,
    `failed_payment_indicator` VARCHAR(255) DEFAULT NULL,
    `payment_failure_reason` VARCHAR(255) DEFAULT NULL,
    `payment_reversal_id` VARCHAR(255) DEFAULT NULL,
    `audit_trail_reference` VARCHAR(255) DEFAULT NULL,
    `sox_control_flag` VARCHAR(255) DEFAULT NULL,
    `posting_approval_status` VARCHAR(100) DEFAULT NULL,
    `approved_by` VARCHAR(255) DEFAULT NULL,
    `approval_date` DATE DEFAULT NULL,
    `period_locked` VARCHAR(255) DEFAULT NULL,
    `period_lock_date` DATE DEFAULT NULL,
    `balance` INT DEFAULT NULL,
    `credit_limit` INT DEFAULT NULL,
    `last_payment_date` DATE DEFAULT NULL,
    `last_payment_amount` INT DEFAULT NULL,
    `status` VARCHAR(100) DEFAULT NULL,
    `notes` VARCHAR(255) DEFAULT NULL,
    `processing_step` VARCHAR(255) DEFAULT NULL,
    `accountable_id` VARCHAR(255) DEFAULT NULL,
    `total_price` INT DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
